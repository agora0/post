---
layout: post
title: 用Google Earth Engine繪製CH4濃度世界地圖
date: 2021-11-06 21:26:23.000000000 +00:00
link: https://vocus.cc/user/@ecyY/6186e67afd89780001e9d6c9
categories: vocus
tags: blog
author: REDBRIC
---

<p>COP26提出Global Methane Pledge令到CH4濃度突然廣受關注 (姚，2021ａ)，到底過去幾年的CH4濃度在世界各地的分佈情況為何？是否有上升的趨勢？本文嘗試利用歐盟/歐空局/哥白尼計劃 (EU/ESA/Copernicus) 的哨兵人造衛星5P (Sentinel-5P) 所收集的離線甲烷數據 (OFFL CH4)，介紹如何使用谷哥地球引擎 (Google Earth Engine，GEE) 繪製不同日期的全球CH4濃度 (以空氣混合比的柱平均值 ppbV量度)。</p>
<p>首先，由於GEE平台須要在網上登記 (https://earthengine.google.com/)，圖1是GEE的版面，可分為上下兩部份，下部為地圖，上部可分為左中右三欄，左邊為檔案等資料，中間是程式編寫器，使用JavaScripts，右邊為處理器。</p>
<p>圖1 Google Earth Engine</p>
<p>GEE在Earth Engine Data Catalog提供了相關利用人造衛星數據繪製CＨ４濃度地圖的資料和程式：Sentinel-5P OFFL CH4: Offline Methane （https://developers.google.com/earth-engine/datasets/catalog/COPERNICUS_S5P_OFFL_L3_CH4），資料由２０１９年２月８日起至今 （圖２），詳情可觀看我的Yｏｕｔｕｂｅ（姚，２０２１ｂ）。</p>
<p>圖２ ＧＥＥ的 Ｄａｔａ　Ｃａｔｌｏｇ　—　ＯＦＦＬ　ＣＨ４</p>
<p>ＧＥＥ提供的JａｖａＳｒｉｐｔｓ非常簡單易明，只要直接抄入GＥＥ便可按RＵＮ。程式可分為三段 — 第一段是定義資料來源：</p>
<p><br></p>
<p><br></p>
<p>var collection = ee.ImageCollection('COPERNICUS/S5P/OFFL/L3_CH4')</p>
<p>  .select('CH4_column_volume_mixing_ratio_dry_air')</p>
<p>  .filterDate('2020-10-01', '2020-10-31');</p>
<p>１。定義變量 collection ＝ee.ImageCollection（檔案名稱）</p>
<p>２。選擇有關ＣＨ４的數據 （數據檔的第一欄)</p>
<p>３。界定日期為２０２０年１０月份</p>
<p><br></p>
<p>第二段則定義顏色與數據關係，如圖１以“黑色”、“藍色”、“紫色”、“青色”、“綠色”、“黃色”、“紅色”代表1750至1900 ppbV的ＣＨ４水平，藍、黑色地區表示CH4水平較低，黃、紅色表示CH4水平較高。</p>
<p>var band_viz = {</p>
<p>  min: 1750,</p>
<p>  max: 1900,</p>
<p>  palette: ['black', 'blue', 'purple', 'cyan', 'green', 'yellow', 'red']</p>
<p>};</p>
<p><br></p>
<p>第三段畫地圖，以 ｃｏｌｌｅｃｔｉｏｎ．ｍｅａｎ（）作為數值，根據顏色區間在地圖加上一層CＨ４濃度水平，並指明地圖的中心座標即成：</p>
<p>Map.addLayer(collection.mean(), band_viz, 'S5P CH4');</p>
<p>Map.setCenter(0.0, 0.0, 2);</p>
<p><br></p>
<p><br></p>
<p>圖３ 製成圖</p>
<p>參考</p>
<p>姚松炎 （２０２１ａ）COP26的CH4目標，方格子，１１月５日。https://vocus.cc/SD_ecofriendly/6184b706fd89780001dd6865 </p>
<p>姚松炎 （２０２１ｂ）用Google Earth Engine 繪製全球 CH4 地圖，ｙｏｕｔｕｂｅ，１１月７日。https://youtu.be/WrrAxk-_arw </p>
