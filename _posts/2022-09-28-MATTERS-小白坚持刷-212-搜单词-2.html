---
layout: post
title: å°ç™½åšæŒåˆ· 212 ï½ æœå•è¯ 2
date: 2022-09-28 01:57:49.000000000 +00:00
link: https://matters.news/@potato_pepper/%E5%B0%8F%E7%99%BD%E5%9D%9A%E6%8C%81%E5%88%B7-212-%E6%90%9C%E5%8D%95%E8%AF%8D-2-bafyreigdhhgab47lzbfszi3rtuoo3oos3uabmcffnn3dpa2ujntajiezl4
categories: matters
tags: blog
author: åœŸè±†ç‚’é’æ¤’
---

<p><strong>åŸºæœ¬ä¿¡æ¯</strong></p><ul><li>é¢˜å·ï¼š212</li><li>é¢˜å‚ï¼šè„¸ä¹¦</li><li>éš¾åº¦ç³»æ•°ï¼šé«˜</li></ul><p><br></p><hr><figure class="image"><img src="https://assets.matters.news/embed/7f3e0033-d54f-484b-a845-66b3aa6c0a1c.jpeg" data-asset-id="7f3e0033-d54f-484b-a845-66b3aa6c0a1c" referrerpolicy="no-referrer"><figcaption><span></span></figcaption></figure><p>#79 å‡çº§ç‰ˆã€‚</p><p>è¿˜æ˜¯åœ¨ m * n çš„çŸ©é˜µä¸­æ‰¾å•è¯ã€‚è¾ƒ #79 ä¸åŒçš„æ˜¯ï¼Œæœ¬æ¬¡è¦æœå¯»ä¸€ç³»åˆ—å•è¯ï¼Œå¦‚æœå•è¯å‡ºç°åœ¨äº†çŸ©é˜µä¸­ï¼Œåˆ™å°†å‡ºç°å•è¯ä»¥æ•°ç»„å½¢å¼è¿”å›ã€‚</p><p><u>æ¬²è§£ 212ï¼Œéœ€å…ˆç†è§£ </u><a href="https://matters.news/@potato_pepper/331734-%E5%B0%8F%E7%99%BD%E7%BB%A7%E7%BB%AD%E5%88%B7-79-%E6%90%9C%E5%8D%95%E8%AF%8D-bafyreiavrr3ehzrqgum2dzdtzmt36tx4xvyjh7jhcneuymxy3qdyp4geci" rel="noopener noreferrer" target="_blank"><u>79</u></a><u>.</u></p><p><strong>è§£é¢˜æ€è·¯</strong></p><ul><li>æŒ‰ç…§ #79 çš„æ€è·¯ï¼Œå¯ä»¥å…ˆå°†ç›®æ ‡å•è¯æ ¹æ®å•è¯é¦–å­—æ¯æ•´ç†æˆ hashmapã€‚å†éå†çŸ©é˜µï¼Œå½“æ ¼å­å’Œ hashmap çš„ key åŒ¹é…æ—¶ï¼Œå†è¿›è¡Œå’Œ #79 ç±»ä¼¼çš„ ä¸Šã€ä¸‹ã€å·¦ã€å³ å››ä¸ªæ–¹å‘æŸ¥æ‰¾ã€‚å¦‚æœæ‰¾åˆ°ï¼Œåˆ™å°†å•è¯æ·»åŠ è¿›è¿”å›æ•°ç»„â€¦â€¦</li></ul><pre class="ql-syntax" spellcheck="false"># åœ¨ 79 åŸç†ä¹‹ä¸Šï¼Œå¼•å…¥ hashmap çš„å‡çº§è§£æ³•å¦‚ä¸‹ï¼š  
class Solution:
    def findWords(self, board: List[List[str]], words: List[str]) -&gt; List[str]:
        # ã€Œé¦–å­—æ¯ã€ï¼šã€Œé¦–å­—æ¯å¯¹åº”å•è¯æ•°ç»„ã€‚ã€‚ã€‚ã€
        wordList = {}
        
        for word in words:
            if word[0] not in wordList:
                wordList[word[0]] = [word]
            else:
                wordList[word[0]].append(word)
                
        row, col = len(board), len(board[0])
        res = []
        
        def findWord(word, r, c, i, path):
            if i == len(word):
                return True
            
            if (r &lt; 0 
               or r &gt;= row
               or c &lt; 0
               or c &gt;= col
               or (r, c) in path
               or board[r][c] != word[i]):
                return False
            
            path.add((r, c))
            res = (findWord(word, r + 1, c, i + 1, path)
                  or findWord(word, r - 1, c, i + 1, path)
                  or findWord(word, r, c + 1, i + 1, path)
                  or findWord(word, r, c - 1, i + 1, path))
            path.remove((r, c))
            
            return res
            
        for r in range(row):
            for c in range(col):
                if board[r][c] in wordList:
                    for word in wordList[board[r][c]]:
                        if findWord(word, r, c, 0, set()) and word not in res:
                            res.append(word)
                            
        return res
</pre><p><br></p><ul><li>ä»¥ä¸Šè§£æ³•åœ¨é€»è¾‘ä¸Šå¹¶æ— æ¼æ´ï¼Œä½†ç®—æ³•<strong>å¤ªè´¹æ—¶ï¼Œä»£ç æ— æ³•é€šè¿‡æµ‹è¯•ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥æ›´é«˜çº§çš„æ•°æ®ç»“æ„â€”â€”trieï¼Œç®€åŒ–æ—¶é—´å¤æ‚åº¦</strong>ã€‚</li></ul><figure class="image"><img src="https://assets.matters.news/embed/ed4e1f87-9d7b-401f-a3a5-04e7bc4efea3.png" data-asset-id="ed4e1f87-9d7b-401f-a3a5-04e7bc4efea3" referrerpolicy="no-referrer"><figcaption><span>ç»´åŸºç™¾ç§‘ã€‚ã€‚ã€‚</span></figcaption></figure><ul><li>ç®€å•ç†è§£ï¼Œç›¸å¯¹çº¿æ€§æ•°æ®ç»“æ„ hashmapï¼Œtrie ç±»ä¼¼ä¸€ä¸ªæ ‘çŠ¶å­—å…¸ã€‚åœ¨éå†å•è¯æ—¶ï¼Œå¦‚æœå½“å‰å­—ç¬¦å­˜åœ¨ï¼Œå°±å¾€ä¸‹ç»§ç»­éå†ï¼›å¦‚æœæ²¡æœ‰å°±æå‰è¿”å› falseã€‚æ¯ä¸ªå•è¯çš„æœ«å°¾ï¼Œå³ leaf nodeï¼Œéœ€è¦æ ‡æ³¨ä¸º endWordã€‚</li><li>å¼•å…¥ trie ä»¥åï¼ŒåŸæœ¬éå† hashmap æ—¶éœ€è¦çš„ Oï¼ˆnï¼‰çš„è´¹æ—¶å¯ä»¥ç®€åŒ–ä¸º Oï¼ˆ1ï¼‰ã€‚</li><li>ä¸ºäº†è¿›ä¸€æ­¥ç®€åŒ–æ—¶é—´å¤æ‚åº¦ï¼Œåœ¨ trie ä¸­æ·»åŠ  removeWord æ–¹æ³•ï¼šå¦‚æœå•è¯è¢«æ‰¾åˆ°ï¼Œå°±åˆ é™¤å®ƒï¼Œå› ä¸ºæœ¬é¢˜ä¸­ç›®æ ‡å•è¯åºåˆ—æ²¡æœ‰é‡å¤ã€‚ã€‚ã€‚</li></ul><p><br></p><hr><pre class="ql-syntax" spellcheck="false"># å¼•å…¥ Trie åçš„å®Œæ•´ä»£ç å¦‚ä¸‹ ğŸ¥²
class TrieNode:
    def __init__(self):
        self.children = {}
        self.isWord = False
        self.refs = 0

    def addWord(self, word):
        cur = self
        cur.refs += 1
        for c in word:
            if c not in cur.children:
                cur.children[c] = TrieNode()
            cur = cur.children[c]
            cur.refs += 1
        cur.isWord = True

    def removeWord(self, word):
        cur = self
        cur.refs -= 1
        for c in word:
            if c in cur.children:
                cur = cur.children[c]
                cur.refs -= 1

class Solution:
    def findWords(self, board: List[List[str]], words: List[str]) -&gt; List[str]:
        root = TrieNode()
        for w in words:
            root.addWord(w)

        ROWS, COLS = len(board), len(board[0])
        res, visit = set(), set()

        def dfs(r, c, node, word):
            if (
                r &lt; 0
                or c &lt; 0
                or r == ROWS
                or c == COLS
                or board[r][c] not in node.children
                or node.children[board[r][c]].refs &lt; 1
                or (r, c) in visit
            ):
                return

            visit.add((r, c))
            node = node.children[board[r][c]]
            word += board[r][c]
            if node.isWord:
                node.isWord = False
                res.add(word)
                root.removeWord(word)

            dfs(r + 1, c, node, word)
            dfs(r - 1, c, node, word)
            dfs(r, c + 1, node, word)
            dfs(r, c - 1, node, word)
            visit.remove((r, c))

        for r in range(ROWS):
            for c in range(COLS):
                dfs(r, c, root, "")

        return list(res)
</pre><p><br></p><hr><p><strong>Constraints</strong></p><ul><li><code>m == board.length</code></li><li><code>n == board[i].length</code></li><li><code>1 &lt;= m, n &lt;= 12</code></li><li><code>board[i][j]</code>&nbsp;is a lowercase English letter.</li><li><code>1 &lt;= words.length &lt;= 3 * 10<sup>4</sup></code></li><li><code>1 &lt;= words[i].length &lt;= 10</code></li><li><code>words[i]</code>&nbsp;consists of lowercase English letters.</li><li>All the strings of&nbsp;<code>words</code>&nbsp;are unique.</li></ul><p>å¯¹æ¯” 79ï¼Œ å‡çº§åçš„ 212 è¦æ±‚ç®—æ³•èƒ½å¤Ÿæœç´¢é«˜è¾¾ 3 * 10<sup>4   </sup>å•è¯åºåˆ—â€¦â€¦<strong>è€ƒè¯•æ—¶ï¼Œå¬åˆ°è¿™ç§å¤§æ•°å­—ï¼ŒåŸºæœ¬ä¸Šé¢„ç¤ºæ˜çœ¼å¯è§çš„ä¸€äº›ç®€å•è§£æ³•ï¼Œè‚¯å®šæ˜¯é€šä¸è¿‡çš„äº†â€¦â€¦éš¾é¢˜ç™»åœºäº†â€¦â€¦ğŸ¥²</strong></p><p><br></p><p><strong>Big O</strong></p><ul><li>Timeï¼šå¼•å…¥ trie åï¼Œå¤æ‚åº¦ä» Oï¼ˆn * m * 4 * k * å•è¯é•¿åº¦ ï¼‰å¯ä»¥ç®€åŒ–ä¸º&nbsp;Oï¼ˆn * m * 4 * å•è¯é•¿åº¦ ï¼‰</li><li>spaceï¼šOï¼ˆkï¼‰ï¼Œk ä¸ºç›®æ ‡æœå¯»å•è¯åºåˆ—é•¿åº¦ã€‚å¦‚æœè¦æœ 1000 ä¸ªå•è¯ï¼Œè¿”å› res é•¿åº¦æœ€åçš„æ—¶å€™æœ‰ 1000 ğŸ˜­</li></ul><p><u>æœ¬é¢˜ååˆ†å¤æ‚ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿å¤§ä½¬è¯„è®ºåŒºæŒ‡è¯ã€‚</u></p><p><br></p><p><strong>æµ‹è¯•</strong></p><ul><li>åºåˆ—ä¸­ä¸€äº›å•è¯å­˜åœ¨ï¼Œä¸€äº›å•è¯ä¸å­˜åœ¨</li><li>å½“ç„¶ä¸è¦å¿˜äº†é‡ç‚¹ï¼šä¸€æ¬¡æœ 3000 ä¸ªå•è¯çš„æé™å€¼â€¦â€¦</li></ul><p><br></p><hr><p><strong>æ€»ç»“</strong></p><ul><li>ä¸å°‘éš¾é¢˜æ˜¯ç”±ä¸­æ¡£ã€ç®€å•æ¡£é¢˜ å¾ªåºæ¸è¿› + å‡çº§ + å˜å½¢ + ç»„è£… è€Œæ¥ï¼Œä¾‹å¦‚æœ¬é¢˜åœ¨ 79 çš„ backtracking ç­‰åŸºç¡€ä¹‹ä¸Šåˆç»„è£…æ·»åŠ äº† trie å…ƒç´ ã€‚<strong>æ¬²è§£éš¾é¢˜ï¼Œéœ€è¦å¯¹åŸºç¡€é¢˜æœ‰æ·±åº¦ç†è§£</strong>ã€‚</li><li>ä¸€äº›<strong>éš¾é¢˜å¹¶ä¸æ˜¯æ‹¿åˆ°é¢˜ç›®åå®Œå…¨æ²¡æœ‰æ€è·¯</strong>ï¼Œä¾‹å¦‚æœ¬é¢˜â€¦â€¦è€Œæ˜¯<strong>é‚£äº›æ˜¾è€Œæ˜“è§çš„ç®€æ˜“æ€è·¯</strong>ï¼ˆä¾‹å¦‚ brute forceï¼‰<strong>å°†é€ æˆæ—¶é—´å¤æ‚åº¦è¶…çº§å¤æ‚ï¼Œéœ€è¦å¼•å…¥é«˜æ¡£æ•°æ®ç»“æ„</strong>ï¼ˆå¦‚æœ¬é¢˜æ¶‰åŠçš„ trie çŸ¥è¯†ç‚¹ï¼‰åˆ<strong>æˆ–è€…é«˜æ¡£ç®—æ³•æ€è·¯</strong>ï¼ˆå¦‚ dynamic programmingğŸ™ˆï¼‰<strong>ä¼˜åŒ–</strong>â€¦â€¦å³éš¾é¢˜éš¾ç‚¹æ‰€åœ¨â€¦â€¦ğŸ˜­</li><li>è€ƒè¯•æ—¶å¦‚æœé‡ä¸Šè¿™ç§é¢˜ï¼Œå¦‚æœååº”ä¸è¿‡æ¥å…ˆæŠŠ brute force + hashmap çš„æ™®é€šè§£æ³•æ‹¿å‡ºæ¥ç»™è€ƒå®˜è®¨è®ºä¸‹ï¼Œæ€»æ¯”ä¸€è¡Œä»£ç ä¸å†™å¾— 0 åˆ†å¼ºã€‚å¦‚æœè€ƒå®˜æš—ç¤º trieï¼Œä¸€å®šè¦æ¥ä½â€¦â€¦ğŸ˜­</li></ul>
