---
layout: post
title: "《數字極權時代生存手記》6. V2Ray 初級教程"
date: 2020-02-10 18:06:07.000000000 +00:00
link: https://matters.news/@Luterngun/%E6%95%B8%E5%AD%97%E6%A5%B5%E6%AC%8A%E6%99%82%E4%BB%A3%E7%94%9F%E5%AD%98%E6%89%8B%E8%A8%98-6-v2-ray-%E5%88%9D%E7%B4%9A%E6%95%99%E7%A8%8B-bafyreihcbjvof6j4b3daypzn32upn4ap3p6s3chr56k4ocxv37iops56z4
categories: matters
tags: blog
author: Luterngun
---

<h2><strong>1 V2Ray 簡介</strong></h2><p>V2Ray 將自身定位為一個功能強大的模塊化代理軟件包，而非單純的協議或軟件。除了自有的 Vmess 協議外，它還直接支持 Shadowsocks、Socks 等協議，允许用户自行選擇各種模式和組合，通過不同的設定來達到不同的代理效果。 由于 V2Ray 原開發者 Victoria Raymond 自 2019 年 3 月後失聯，没有完整权限的其他维护者创建了新的 <a href="https://github.com/v2fly" target="_blank">organization</a> 持續開發，原 organization 中的仓库会一直同步更新。</p><p><strong>1.1 V2Ray 的優缺點</strong></p><p><strong>1.1.1 V2Ray 的優勢</strong></p><blockquote>（1）更完善的協議: V2Ray 使用了新的自行研發的 VMess 協議，改正了 Shadowsocks 一些已有的缺點，更難被牆檢測到 <br class="smart">（2）更強大的性能: 網絡性能更好，具體數據可以看 <a href="https://steemit.com/cn/@v2ray/3cjiux" target="_blank">V2Ray 官方博客</a> <br class="smart">（3）更豐富的功能: <br class="smart">以下是部分 V2Ray 的功能 <br class="smart">mKCP: KCP 協議在 V2Ray 上的實現，不必另行安裝 <br class="smart">kcptun 動態端口：動態改變通信的端口，對抗對長時間大流量端口的限速封鎖 <br class="smart">路由功能：可以隨意設定指定數據包的流向，去廣告、反跟蹤都可以 <br class="smart">傳出代理：看名字可能不太好理解，其實差不多可以稱之為多重代理。類似於 Tor 的代理 <br class="smart">數據包偽裝：類似於 Shadowsocks-rss 的混淆，另外對於 mKCP 的數據包也可偽裝，偽裝常見流量，令識別更困難 <br class="smart">WebSocket 協議：可以 PaaS 平台搭建V2Ray，通過 WebSocket 代理。也可以通過它使用 CDN 中轉，抗封鎖效果更好 <br class="smart">Mux：多路復用，進一步提高科學上網的併發性能</blockquote><p>——<a href="https://toutyrater.github.io/" target="_blank">V2Ray 白話文教程 - 前言</a></p><blockquote>VMess協議的特徵是在目前常見協議中最弱的。即如果你認為VMess具有某個特徵，那麼在ss/ssr/其它協議中一定存在同樣或更強的特徵；反之則不然。</blockquote><p>——<a href="https://t.me/v2msg/58" target="_blank">Project V 官方公告</a></p><blockquote>關於 TLS 混淆，V2Ray 用的是真 TLS，即完全符合 TLS 協議；Shadowsocks 的 obfs 和 ShadowsocksR 的 TLS 混淆用的均為假 TLS，即只模擬了部分 TLS 協議。真 TLS 的優勢是服務器端防探測，第三方用任意的 TLS 數據包探測，V2Ray 都能做出合理的響應，而假TLS 則帶有明顯的特徵。真 TLS 會有首次連接時進行一個兩次通信(2-rtt)的握手，比起假 TLS 略慢，但之後的連接中，由於使用了緩存，握手不會有性能差異。</blockquote><p>——<a href="https://t.me/v2msg/9" target="_blank">Project V 官方公告</a></p><p><strong>1.1.2 V2Ray 的缺點</strong></p><blockquote>配置複雜 <br class="smart">產業鏈不成熟</blockquote><p>——<a href="https://toutyrater.github.io/" target="_blank">V2Ray 白話文教程 - 前言</a></p><p><strong>1.2 V2Ray 獲取渠道</strong></p><p>预编译的压缩包： <br class="smart">Github Release: <a href="https://github.com/v2ray/v2ray-core/releases" target="_blank">github.com/v2ray/v2ray-core</a> <br class="smart">Github 分流: <a href="https://github.com/v2ray/dist/" target="_blank">github.com/v2ray/dist</a> <br class="smart">Homebrew: <a href="https://github.com/v2ray/homebrew-v2ray" target="_blank">github.com/v2ray/homebrew-v2ray</a> <br class="smart">Arch Linux: <a href="https://www.archlinux.org/packages/community/x86_64/v2ray/" target="_blank">packages/community/x86_64/v2ray/</a> <br class="smart">Snapcraft: <a href="https://snapcraft.io/v2ray-core" target="_blank">snapcraft.io/v2ray-core</a> <br class="smart">參見：<a href="https://www.v2fly.org/chapter_00/install.html#linuxscript" target="_blank">Project V - 下載安裝 - Linux 安裝腳本</a></p><p><strong>1.3 Project V 與 V2Ray 的關係 </strong></p><p>V2Ray 升級到 3.0 後正式擴展為 Project V。Project V 是一個工具集合，囊括了作為核心工具的 V2Ray 以及客戶端、配置工具等周邊產品。</p><p><br></p><h2><strong>2 如何使用 V2Ray </strong></h2><p><strong>2.1 服務器端</strong></p><p><strong>2.1.1 購買 V2Ray 節點</strong> <br class="smart">參見： <a href="https://www.v2fly.org/awesome/ads.html#vpn" target="_blank"><br class="smart">Project V - 神一樣的工具們 - 以及廣告 - VPN</a> <a href="https://github.com/DuyaoSS/SSR/issues/1" target="_blank"><br class="smart">DuyaoSS｜浅谈部分机场（SS/SSR提供商）的使用感受--完整版（联通）更新中</a></p><p><strong>2.1.2 租用 VPS 自建 V2Ray</strong><br class="smart">如果你選擇使用 HyperApp 搭建 V2Ray，請參考： <a href="https://www.hyperapp.fun/zh/Store/V2Ray.html" target="_blank"><br class="smart">HyperApp 用戶手冊 - 商店應用配置 - V2Ray 教程</a> <a href="https://www.hyperapp.fun/zh/Store/V2ray+Websocket.html" target="_blank"><br class="smart">HyperApp 用戶手冊 - 商店應用配置 - V2Ray完美混淆教程（内含全平台客户端配置教程）</a></p><p>如果在 Linux 下部署，請參考：<a href="https://www.v2fly.org/chapter_00/install.html" target="_blank"><br class="smart">Project V - 下載安裝</a> <a href="https://www.v2fly.org/chapter_00/start.html" target="_blank"><br class="smart">Project V - 新手上路</a> <a href="https://guide.v2fly.org/" target="_blank"><br class="smart">新白話文教程（社區版）</a></p><p>① 使用 SSH 登錄 VPS，輸入： </p><pre class="ql-syntax">ssh root@00.00.00.00 #你的服務器 IP
</pre><p>② 修改時間 <br class="smart">使用 Vmess 協議必須保證本地和服務器端的時間差不超過一分鐘，因此需要修改 VPS 的系統時間： </p><pre class="ql-syntax">rm -rf /etc/localtime #先刪除默認的時區設置 
ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime #替換上海作為默認 
</pre><p>或者使用「date --set」： </p><pre class="ql-syntax">sudo date --set=2018-01-01 00:00:00
</pre><p>查看時間： </p><pre class="ql-syntax">date -R
</pre><p>③ 使用 Linux 腳本安裝 V2Ray（更新 v2ray-core 時同樣使用此腳本） </p><pre class="ql-syntax">bash &lt;(curl -L -s https://install.direct/go.sh) 
</pre><p>運行 service v2ray start 來啓動 V2Ray 進程，使用 service v2ray start|stop|status|reload|restart|force-reload 控制 V2Ray 的運行</p><p>④ 編輯配置文件 </p><pre class="ql-syntax">cd /etc/v2ray/ 
vim config.json
</pre><p>編輯你的配置文件，輸入「:wq」回車來保存和退出。</p><p>⑤ 重啓 V2Ray 並查看是否正常運行 </p><pre class="ql-syntax">systemctl restart v2ray 
systemctl status v2ray
</pre><p>如果顯示紅色的 failed 表明你的配置有誤，V2Ray 無法正常運營。V2Ray 本身提供了檢查功能，輸入： usr/bin/v2ray/v2ray -test -config /etc/v2ray/config.json 來檢測 config.json 是否有誤。</p><p><br></p><p><a href="https://raw.githubusercontent.com/KiriKira/vTemplate/master/How" target="_blank">https://raw.githubusercontent.com/KiriKira/vTemplate/master/How</a><em>To</em>Choose.jpg</p><p>關於 V2Ray 的模式選擇，可以參考上圖。 Vmess 裸奔的難度最低，可參考 <a href="https://www.v2fly.org/chapter_00/start.html" target="_blank">Project V - 新手上路</a> 。 TCP + TLS 可以參考 <a href="https://toutyrater.github.io/advanced/tls.html" target="_blank">白話文教程 - TLS</a> 。使用 TLS 需要域名和 SSL 證書，域名可以從 <a href="https://my.freenom.com/clientarea.php" target="_blank">Freenom</a> 免費獲取或者從 <a href="https://www.namecheap.com/" target="_blank">Namecheap</a> 購買廉價域名；SSL 證書可由 acme.sh、Caddy、Ngnix、certbot 等應用自動註冊，購買域名後需要添加一個 A 記錄指向 VPS 的 IP，之後若 ping 域名可以 ping 通且顯示 VPS 的真實 IP 則表明域名已經解析成功。 WS+TLS+Web 可能是目前抗封鎖效果最好的模式，難度也相對較高。</p><p>關於 V2Ray 使用教程的選擇，建議先看懂 Project V 官網和白話文教程，如有需要再搭配其他博客上的教程和配置模板。對於後者，編者建議認准同一份教程，因為不同作者採用的方法和配置文件之間存在差異，對新手而言同時參考多份教程可能會使你的思路越來越混亂。 如果在配置過程遇到問題，建議先自行搜索相關信息，在 Github 上查看 v2ray-core 已有的 Issue ，如果問題仍未解決，可以參照模板在 Github 上提交 issue 或者在 Telegram 群組中提問。</p><p><strong>2.2 客戶端</strong></p><p><strong>2.2.1 客戶端的選擇</strong><br class="smart">參見：<a href="https://www.v2fly.org/awesome/tools.html" target="_blank">Project V - 神一樣的工具們</a></p><p><strong>2.2.2 客戶端的配置</strong><br class="smart">以 Project V 官網上「新手上路」教程為例，在客戶端添加節點信息時，協議類型 (Type) 選擇「Vmess」，地址 (Address) 填寫自己 VPS 的域名，端口 (Port) 填「10086」 ，UUID 與服務器端保持一致，加密方式 (Security) 填「chacha20-poly1305」，傳輸協議 (Network) 選擇「tcp」。</p><p><br></p><h2><strong>3 捐助支持 Project V</strong></h2><p><a href="https://www.v2fly.org/chapter_00/02_donate.html" target="_blank">Project V - 捐助支持</a></p><p><br></p><h2><strong>4 資訊與交流 </strong></h2><p><a href="https://www.v2fly.org/chapter_00/help.html#github-issue" target="_blank">Github Issue</a> <br class="smart">Telegram 頻道：<a href="https://t.me/v2fly" target="_blank">Project V 官方公告</a> <a href="https://t.me/v2fly_chat" target="_blank"><br class="smart">Telegram 群組 - 使用</a>：仅用于讨论 Project V 使用相关问题，严禁任何不相关的话题。<br class="smart"> <a href="https://t.me/joinchat/DNcazUIYaH80uVfeS716jg" target="_blank">Telegram 群組 - 日常</a>：用于其它不相关的话题。</p><p><br></p><p>參見： <br class="smart">Project V <a href="https://www.v2ray.com/" target="_blank">https://www.v2ray.com</a> <br class="smart">Project V <a href="https://www.v2fly.org/" target="_blank">https://www.v2fly.org/</a> <a href="https://steemit.com/@v2ray" target="_blank"><br class="smart">Victoria Raymond 的博客</a> <a href="https://steemit.com/cn/@v2ray/meemg-v2ray" target="_blank"><br class="smart">V2Ray 的模塊化</a><a href="https://toutyrater.github.io/" target="_blank"><br class="smart">白話文教程</a> <a href="https://guide.v2fly.org/" target="_blank"><br class="smart">新白話文教程（社區版）</a> <a href="https://htfy96.github.io/v2ray-config-gen/" target="_blank"><br class="smart">V2Ray 配置生成器</a> <a href="https://t.me/kiraybot" target="_blank">Kiray</a>（Telegram bot） <a href="https://kirikira.moe/post/19/" target="_blank"><br class="smart">Kiri | 五分鐘入門V2Ray</a> <a href="https://kirikira.moe/post/26/" target="_blank"><br class="smart">Kiri | 鏈式代理與透明代理：V2Ray 的進階用法</a> <a href="https://yuan.ga/v2ray-complete-tutorial/" target="_blank"><br class="smart">YEARLINY | V2Ray完全使用教程</a> <a href="https://github.com/abccit/V2Ray" target="_blank"><br class="smart">abccit：安裝 V2Ray 配置 WebSocket+Nginx+TLS</a> <a href="https://www.ivyseeds.cf/blog/v2ray/" target="_blank"><br class="smart">IVY SEEDS - 科學愛國 - V2Ray</a> <a href="https://darrenliuwei.github.io/fuck-gfw/V2ray/V2ray.html" target="_blank">科學上網翻牆教程：搭建V2Ray翻牆</a><a href="https://youtu.be/GV4VhUOc7hg" target="_blank"><br class="smart">YouTube | 劉偉教程：零基礎手把手教你搭建V2ray翻牆Linux/Windows/MacOS/安卓/蘋果</a> （如果你是 VPS 和 Linux 新手，可以在 YouTube 上搜索、觀看相對直觀的視頻教程來加深瞭解） <a href="https://matters.news/@slivenred/name-cheap-%E8%A9%95%E5%83%B9-%E8%B3%BC%E8%B2%B7%E4%BE%BF%E5%AE%9C%E7%B6%B2%E5%9F%9F%E6%87%B6%E4%BA%BA%E5%8C%85%E5%AE%8C%E6%95%B4%E8%A8%BB%E5%86%8A%E6%95%99%E5%AD%B8-tech-moon-%E7%A7%91%E6%8A%80%E6%9C%88%E7%90%83-zdpuAwTZ66ZxbnZEFFEV4kp7Mo6cz4DtVAhTmUpKswY7r7rG1" target="_blank"><br class="smart">Matters | Sliven：NameCheap 評價 – 購買便宜網域懶人包完整</a></p>
