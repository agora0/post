---
layout: post
title: 大水災年-學用GEE繪製降雨量地圖
date: 2021-12-31 08:45:14.000000000 +00:00
link: https://vocus.cc/user/@ecyY/61cc0d3dfd89780001f7fdf8
categories: vocus
tags: blog
author: REDBRIC
---

<p>若以一字記之，2020年為疫，2021年則為澇，合稱澇疫之年。去年全球遇上百年一遇的世紀疫症，至今未除；今年全球到處都是N年一遇的世紀水災，死傷慘重。Christian Aid (2021) 的全年十大氣候災難報告在2021年12月出版，估不到在出版後的半個月內已有兩宗致命的水災，仍屬2021年氣候災難，一宗在馬來西亞，另一宗在巴西。</p>
<h3>2021年世界十大水災</h3>
<p>以下是今年全球風暴及水災的奪命人數，估計超過900人，遍及北美、南美、歐、亞、大洋五洲：</p>
<p>３月１０—２４日澳洲 水災— ２人死</p>
<p>５月１４—１９日印度、斯里蘭卡、馬爾代夫 颶風 - 198人死</p>
<p>5月25-29日印度、孟加拉 颶風 - 19人死 </p>
<p>7月12-18日德國、法國、荷蘭、比利時、盧森堡 水災 - 240人死</p>
<p>7月17-31日中國河南 水災 - 302人死</p>
<p>7月21-28日中國、菲律賓、日本 颱風 - 5人死</p>
<p>8月28 - 9月2日美國 颶風 - 95人死</p>
<p>11月14日 加拿大BC省 水災 - 4人死 (以上8項來自 <a href="https://www.christianaid.org.uk/sites/default/files/2021-12/Counting%20the%20cost%202021%20-%20A%20year%20of%20climate%20breakdown.pdf">Christian Aid, 2021</a>)</p>
<p>12月19-21日 馬來西亞水災 - 最少14人死 (<a href="https://www.bbc.com/news/world-asia-59723341">BBC, 2021</a>)</p>
<p>12月28日 巴西巴伊亞州 水災 - 至今已有20人死 (<a href="https://www.nytimes.com/2021/12/28/world/americas/brazil-floods-climate-change.html#:~:text=RIO%20DE%20JANEIRO%20%E2%80%94%20At%20least,coastal%20terrain%20left%20Brazilians%20staggered.">New York Times, 2021</a>)</p>
<p>本文刊出時已是紐西蘭時間12月29日晚，今年應該不會再有新的致命水災。但由於全球暖化不斷加劇，相信N年一遇的特大水災只會愈來愈頻繁，威力愈來愈猛烈，但既然控制地球升溫無望，大家只好自求多福，學吓畫地圖，做吓分析。</p>
<h3>用GEE畫降雨量地圖</h3>
<p>分析水災先要搜集如降兩量等相關資料，各地的天文台網站常有提供，但要每個國家搜尋，非常費時，本文介紹如何在Google Earth Engine (GEE) 利用 NASA 的GPＭ衛星數據，不需一分鐘便可繪製出全球任何地方任何日期的降雨量地圖，有興趣進階學習更可製作如timelapse的風暴移動圖動畫。</p>
<p>首先，大家若錯過了月前介紹如何登入GEE，請先閱讀前文 (<a href="https://vocus.cc/AI_and_ML/6186e67afd89780001e9d6c9">姚，2021</a>)登入GEE，關於全球降雨量的衛星數據，現時有最少三套不同的資料，今次為大家介紹是一套由美國太空總署NASA提供的NASA/GPM_L3/IMERG_V06每半小時降雨量的衛星數據 (Huffman et al., 2019: GPM IMERG Final Precipitation L3 Half Hourly 0.1 degree x 0.1 degree V06, <strong>DOI:</strong> 10.5067/GPM/IMERG/3B-HH/06)</p>
<p>圖1顯示2021年12月25日聖誕節當天巴西巴伊亞州的降雨量衛星圖，紅色位置的全日最高降雨量達到每小時50毫米，清楚顯示暴雨成災的位置和變化，對研究和分析或預測水災有莫大幫助。但以文字表達如何在GEE利用NASA衛星數據繪畫地圖比較困難，將會製作一條短片逐步示範，清楚易明 (Youtube: https://youtu.be/ZtKRSKBvqWs)。</p>
<iframe class="embedly-embed" src="//cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FZtKRSKBvqWs%3Ffeature%3Doembed&amp;display_name=YouTube&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DZtKRSKBvqWs&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FZtKRSKBvqWs%2Fhqdefault.jpg&amp;key=07668a9ac4f243de9f6814e3e7b91420&amp;type=text%2Fhtml&amp;schema=youtube" scrolling="no" title="YouTube embed" allow="autoplay; fullscreen" allowfullscreen="true" data-connected="1" width="740" height="417" frameborder="0"></iframe>
<img alt="圖1 在GEE用NASA的降雨量衛星數據繪製2021年12月25日巴西東北部的情況。" src="https://d2a6d2ofes041u.cloudfront.net/resize?norotation=true&amp;url=https%3A%2F%2Fimages.vocus.cc%2Feb025d1b-2fe8-42dc-b5a0-9bf782635fa4.png&amp;width=740&amp;sign=pZI06nxF9Oe091DlmGcjO6QCdE6hOwbmbRY_u1JdCUQ" class="" style="max-width: 740px;" width="740" height="416.232">
<p>圖1 在GEE用NASA的降雨量衛星數據繪製2021年12月25日巴西東北部的情況。</p>
<p>GEE data catalog 本身有提供程式，可直接Run便可，簡單介紹如下：</p>
<p><br></p>
<p>var range = ee.Date('2021-12-25').getRange('day') //定義日期2021年12月25日全日數據</p>
<p>var dataset = ee.ImageCollection('NASA/GPM_L3/IMERG_V06') //數據來源</p>
<p>    .filter(ee.Filter.date(range)); //選取當日</p>
<p>var precipitation = dataset.select('precipitationCal').max(); //選取最高降雨量</p>
<p>var mask = precipitation.gt(0.5); //低於0.5可隱藏</p>
<p>var precipitation = precipitation.updateMask(mask); //除去隱藏後再定義降雨量</p>
<p>var palette = [</p>
<p>  '000096','0064ff', '00b4ff', '33db80', '9beb4a',</p>
<p>  'ffeb00', 'ffb300', 'ff6400', 'eb1e00', 'af0000'</p>
<p>]; //定義降雨量顏色</p>
<p>var precipitationVis = {min: 0.0, max: 30.0, palette: palette}; //定義最低和最高降雨量值</p>
<p>Map.addLayer(precipitation, precipitationVis, 'Precipitation'); //繪圖</p>
<p>Map.setCenter(-41, -12, 5); //定位坐標-41, -12為巴西東北部，5為地圖大小</p>
<p><br></p>
<h3>2018年山竹襲港</h3>
<p>每小時50毫米降雨量是甚麼概念？以下試與香港人記憶猶新和心有餘悸的2018年十號颱風「山竹」襲港來比較，天文台較多報導中心風力，較少提供降雨量的資料。大家只要在GEE更改程式中第一行的日期為2018-09-16，再把最後一行的座標改為114, 22便可得出山竹襲港當日的降雨量地圖。</p>
<p>以下圖2，圖3，圖4是2018年9月14、15、16日的香港區域降雨量地圖，圖中紅色部份的降雨量高達85、96、82毫米。<a href="https://www.hko.gov.hk/tc/informtc/mangkhut18/tabrf.htm">香港天文台</a>更在當日錄得最高每小時279毫米雨量(石崗站)。</p>
<img alt="圖2 2018年9月14日香港區域的降雨量衛星圖" src="https://d2a6d2ofes041u.cloudfront.net/resize?norotation=true&amp;url=https%3A%2F%2Fimages.vocus.cc%2Fc8d13eea-af1d-4c6d-928d-9a139b6b0d70.png&amp;width=740&amp;sign=ea8slWc4GULhY8-qHEvpTRf2VGJfenLJsMq4TMQ-qtM" class="" style="max-width: 740px;" width="740" height="416.232">
<p>圖2 2018年9月14日香港區域的降雨量衛星圖</p>
<img alt="圖3 2018年9月15日香港區域的降雨量衛星圖" src="https://d2a6d2ofes041u.cloudfront.net/resize?norotation=true&amp;url=https%3A%2F%2Fimages.vocus.cc%2F101fd948-6980-4c87-bf18-346d4fc57fd3.png&amp;width=740&amp;sign=c9vp9FOXvlPpPRbPEGMt29wyUtDuRnuc97HxdJSxYrE" class="" style="max-width: 740px;" width="740" height="416.232">
<p>圖3 2018年9月15日香港區域的降雨量衛星圖</p>
<img alt="圖4 2018年9月16日香港區域的降雨量衛星圖" src="https://d2a6d2ofes041u.cloudfront.net/resize?norotation=true&amp;url=https%3A%2F%2Fimages.vocus.cc%2F5e942324-f9aa-442c-bc6c-d27011efc5e7.png&amp;width=740&amp;sign=_esk6s0pyPOHgtWNwaYbDDVyuBDZe_iIKkrXHjGrjgw" class="" style="max-width: 740px;" width="740" height="416.232">
<p>圖4 2018年9月16日香港區域的降雨量衛星圖</p>
<h3>Timelapse時序動態短片</h3>
<p>把每日或每小時的衛星地圖放在Timelapse軟件上便可製作出一條時序動態短片，簡介山竹襲港的威力，有興趣學習的讀者可以閱讀<a href="https://blog.gishub.org/gee-tutorial-39-how-to-create-landsat-timelapse-animations-without-coding">Wu (2020)</a> 的介紹，即使用Adobe的video已經可以有類似的效果，大家不妨試試。</p>
<iframe class="embedly-embed" src="//cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FdnNxGQCg2Fo%3Ffeature%3Doembed&amp;display_name=YouTube&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DdnNxGQCg2Fo&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FdnNxGQCg2Fo%2Fhqdefault.jpg&amp;key=07668a9ac4f243de9f6814e3e7b91420&amp;type=text%2Fhtml&amp;schema=youtube" scrolling="no" title="YouTube embed" allow="autoplay; fullscreen" allowfullscreen="true" data-connected="1" width="740" height="417" frameborder="0"></iframe>
<p>參考</p>
<p>Christian Aid (2021) Counting the cost 2021 A year of climate breakdown, December. https://www.christianaid.org.uk/sites/default/files/2021-12/Counting%20the%20cost%202021%20-%20A%20year%20of%20climate%20breakdown.pdf</p>
<p>Huffman, G.J., E.F. Stocker, D.T. Bolvin, E.J. Nelkin, Jackson Tan (2019), GPM IMERG Final Precipitation L3 Half Hourly 0.1 degree x 0.1 degree V06, Greenbelt, MD, Goddard Earth Sciences Data and Information Services Center (GES DISC), Accessed: <strong>[</strong><em><strong>2</strong></em>9 December 2021<strong>]</strong>, <a href="https://doi.org/10.5067/GPM/IMERG/3B-HH/06" target="_blank">10.5067/GPM/IMERG/3B-HH/06</a></p>
<p>Wu, Q. (2020) GEE Tutorial #39 - How to create Landsat timelapse animations without coding，Geospatial Data Science, Oct 14. https://blog.gishub.org/gee-tutorial-39-how-to-create-landsat-timelapse-animations-without-coding</p>
<p>姚松炎 (2021) 用Google Earth Engine繪製CH4濃度世界地圖，方格子，11月7日。https://vocus.cc/AI_and_ML/6186e67afd89780001e9d6c9</p>
